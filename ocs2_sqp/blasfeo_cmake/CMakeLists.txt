cmake_minimum_required(VERSION 3.14)
project(blasfeo_build)

include(FetchContent)

# è®¾ç½® install è·¯å¾„ï¼ˆå¯ç”¨äºå…¶ä»– target å¯¼å…¥ï¼‰
set(BLASFEO_INSTALL_DIR ${CMAKE_CURRENT_BINARY_DIR}/blasfeo-install)

set(BLASFEO_EXAMPLES OFF CACHE BOOL "Disable examples" FORCE)

# ä¸‹è½½å¹¶æ„å»º blasfeo
FetchContent_Declare(blasfeo
  GIT_REPOSITORY https://github.com/giaf/blasfeo
  GIT_TAG ae6e2d1dea015862a09990b95905038a756ffc7d
  SOURCE_DIR ${CMAKE_CURRENT_BINARY_DIR}/blasfeo-src
  BINARY_DIR ${CMAKE_CURRENT_BINARY_DIR}/blasfeo-build
  BUILD_COMMAND $(MAKE)
  INSTALL_COMMAND "$(MAKE) install PREFIX=${BLASFEO_INSTALL_DIR}"
)

FetchContent_MakeAvailable(blasfeo)

# ğŸ” ä¸è¦æ‰‹åŠ¨ add_library(blasfeo)ï¼Œç›´æ¥ä½¿ç”¨ upstream æä¾›çš„ target å³å¯
